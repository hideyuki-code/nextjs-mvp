# 🔄 フェーズ4：ISRとデータ取得（10h）

## 📋 フェーズ概要

ISR（Incremental Static Regeneration）の仕組みを理解し、効率的なデータ取得システムを構築します。

## 🎯 学習目標

- [ ] ISRの仕組みと利点を理解
- [ ] generateStaticParams の使い方を理解
- [ ] JSONデータを使った記事管理システムの構築
- [ ] 404・notFoundハンドリングの実装

---

## 🎫 チケット一覧

### 📚 TICKET-4-1：ISRの仕組み（generateStaticParams, revalidate）を理解する

**⏰ 予想時間：** 2h  
**📊 進捗：** 
- [ ] 実装完了
- [ ] 検証完了  
- [ ] 知識定着完了

**🎯 学習内容：**
- ISRの基本概念と利点
- generateStaticParamsの仕組み
- revalidateオプションの使い方
- 静的生成と動的レンダリングの使い分け

**📝 実装手順：**
1. Next.js公式ドキュメントでISRを調査
2. generateStaticParamsの仕組みを理解
3. revalidateオプションの動作を確認
4. ChatGPT Webで知識を整理・言語化

**✅ 検証方法：**
- ISRの利点を説明できる
- generateStaticParamsの使い方を理解している
- revalidateの動作を理解している
- 静的生成と動的レンダリングの違いを説明できる

**💭 学習メモ：**
```
[ここに学習で得た知識を記録]
```

---

### 🔨 TICKET-4-2：JSONファイル（/data/posts.json）からのデータ取得機能を実装

**⏰ 予想時間：** 2.5h  
**📊 進捗：** 
- [ ] 実装完了
- [ ] 検証完了  
- [ ] 知識定着完了

**🎯 実装内容：**
- 記事データのJSONファイル作成
- データ取得関数の実装
- TypeScript型定義の作成
- データ取得のユーティリティ関数

**📝 実装手順：**
1. `/data/posts.json` にサンプル記事データを作成
2. 記事データの型定義を作成
3. データ取得関数 `getPosts()`, `getPost(slug)` を実装
4. エラーハンドリングを追加

**✅ 検証方法：**
- [ ] JSONファイルから記事データを取得できる
- [ ] TypeScript型定義が正しく適用される
- [ ] エラーハンドリングが正常に動作する
- [ ] データ取得関数が再利用可能

**💭 実装メモ：**
```
[実装時の気づきや問題点を記録]
```

---

### 🔨 TICKET-4-3：記事一覧（/posts）と記事詳細（/posts/[slug]）でISR適用

**⏰ 予想時間：** 3h  
**📊 進捗：** 
- [ ] 実装完了
- [ ] 検証完了  
- [ ] 知識定着完了

**🎯 実装内容：**
- 記事一覧ページの実装
- 記事詳細ページの実装
- ISRによる静的生成の実装
- generateStaticParamsの実装

**📝 実装手順：**
1. `/posts/page.tsx` に記事一覧ページを実装
2. `/posts/[slug]/page.tsx` に記事詳細ページを実装
3. generateStaticParamsを実装
4. revalidateオプションを設定

**✅ 検証方法：**
- [ ] 記事一覧ページが正常に表示される
- [ ] 記事詳細ページが正常に表示される
- [ ] ISRによる静的生成が動作する
- [ ] generateStaticParamsが正しく動作する

**💭 実装メモ：**
```
[実装時の気づきや問題点を記録]
```

---

### 📚 TICKET-4-4：動的ルートにおける404とnotFound処理の違いを理解する

**⏰ 予想時間：** 2.5h  
**📊 進捗：** 
- [ ] 実装完了
- [ ] 検証完了  
- [ ] 知識定着完了

**🎯 学習内容：**
- 404ページとnotFound()関数の違い
- 動的ルートでのエラーハンドリング
- not-found.tsxの実装
- カスタム404ページの作成

**📝 実装手順：**
1. Next.js のエラーハンドリングを調査
2. not-found.tsxページを作成
3. 動的ルートでnotFound()関数を実装
4. カスタム404ページを作成

**✅ 検証方法：**
- [ ] 存在しない記事でnotFound()が呼ばれる
- [ ] カスタム404ページが表示される
- [ ] 適切なHTTPステータスコードが返される
- [ ] SEOに配慮した404ページが実装される

**💭 実装メモ：**
```
[実装時の気づきや問題点を記録]
```

---

## 🎓 フェーズ4完了チェック

**すべてのチケットが完了したら以下を確認：**

- [ ] ISRの仕組みを理解している
- [ ] generateStaticParamsを使えるようになっている
- [ ] JSONデータからの記事管理システムが動作している
- [ ] 適切なエラーハンドリングが実装されている
- [ ] パフォーマンス最適化が適用されている

**🎯 次のステップ：**
[phase5-mvp-build.md](./phase5-mvp-build.md) に進む

---

**開始日：** [日付を記入]  
**完了日：** [日付を記入]  
**実際の所要時間：** [時間を記入] 